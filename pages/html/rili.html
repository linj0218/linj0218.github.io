<!DOCTYPE HTML>
<html>
<head>
<title>demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

 <!-- Bootstrap Core CSS -->
<link href="../css/bootstrap.min.css" rel='stylesheet' type='text/css' />
<link href="../css/mobiscroll.custom-2.17.0.min.css" rel='stylesheet' type='text/css' />

<script type="text/javascript" src="../js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/mobiscroll.custom-2.17.0.min.js"></script>
<style type="text/css">
    .body{
        padding: 20px;
    }
    #demo, #name, #demo-name{
        border: 1px solid #ccc;
        border-radius: 3px;
        height: 3rem;
    }
    .dw-cal-anim{
        /*width: 100% !important;*/
    }
</style>
</head>
<body>
    <div class="body container-fluid">
        <div class="row">
            <h4 class="col-md-12">本周值日</h4>
            <input class="col-xs-12 col-sm-6 col-md-6" id="name" disabled="disabled" placeholder="Please Select The Date">
        </div>
        <div class="row">
            <h4 class="col-md-12">查看日期</h4>
            <input class="col-xs-12 col-sm-6 col-md-6" id="demo" placeholder="Please Select..." />
        </div>
        <div class="row">
            <h4 class="col-md-12">当周值日</h4>
            <input class="col-xs-12 col-sm-6 col-md-6" id="demo-name" disabled="disabled" placeholder="Please Select..." />
        </div>
        <div class="row" style="padding: 10px;">
            <strong>注：</strong>
            <ul class="col-xs-12 col-sm-12 col-md-12">
                <li>1603值日查看</li>
                <li>“本周值日”显示本周的值日</li>
                <li>“查看日期”选择想要查看的日期</li>
                <li>“当周值日”显示选择日期的值日</li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">
        $('#demo').mobiscroll().calendar({
            theme: 'mobiscroll',
            lang: 'zh',
            display: 'bottom',
            layout: 'liquid',
            dateFormat: 'yy-mm-dd',
            weekCounter: 'year',
            onSelect: function (valueText, inst) {
                console.log(valueText)
                console.log(inst)
                var a = valueText.split("-");
                // var a1 = new Date(a[0], a[1], a[2]).getYear();
                console.log(a);
                console.log( "今天是",a[1],"月的第 ", getMonthWeek(a[0], a[1], a[2]), " 周" );
            }
        });
        // $('#demo').mobiscroll('show');

        /* 
            a = d = 当前日期 
            b = 6 - w = 当前周的还有几天过完(不算今天) 
            a + b 的和在除以7 就是当天是当前月份的第几周 
        */
        var getMonthWeek = function (a, b, c) { 
            var date = new Date(a, parseInt(b) - 1, c), w = date.getDay(), d = date.getDate(); 
            return Math.ceil( (d + 6 - w) / 7 ); 
        };
        /* 
            date1是当前日期 
            date2是当年第一天 
            d是当前日期是今年第多少天 
            用d + 当前年的第一天的周差距的和在除以7就是本年第几周 
        */
        var getYearWeek = function (a, b, c) { 
            var date1 = new Date(a, parseInt(b) - 1, c), date2 = new Date(a, 0, 1), 
            d = Math.round((date1.valueOf() - date2.valueOf()) / 86400000); 
            return Math.ceil( (d + ((date2.getDay() + 1) - 1)) / 7 ); 
        }; 

        today=new Date();//获取当前时间
        var y = today.getYear();
        var m = today.getMonth()+1;
        var d = today.getDate();
        // document.write( "今天是",m,"月的第 ", getYearWeek(y, m, d), " 周" );
    </script>
</body>
</html>
